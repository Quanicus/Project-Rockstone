<div id="load-bar" hx-get="/api/generated-products" hx-trigger="every 1s" hx-swap="outerHTML">
    <div id="load-progress" style="width:<%= progress %>;"></div>
    <div><%= message %></div>
</div>

<% for (const product of products) { %>
    <div class="app-result">
        <div><%= product.source.name %></div>
        <div>UPC: <%= product.upc %></div>
        <div>
            <span>
                <a href="<%= product.source.url %>" target="_blank">
                    <div>Current <%= product.source.retailer %> price: $<%= product.source.price %></div>
                </a>
            </span>
            <span>
                <a href="https://www.amazon.com/dp/<%= product.asins[0].asin %>" target="_blank">
                    <div>Amazon price: $<%= product.asins[0].price %></div>
                    <div>Amazon ASIN: <%= product.asins[0].asin %></div>
                </a>
            </span>
            
        </div> 
    </div>
<% } %>